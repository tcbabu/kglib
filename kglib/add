    DIALOG *D= (DIALOG *)Tmp;
    kgWC *wc;
    XEvent res;			/* response to event */
    Window win;
    Atom pty,target,prop,sel;
    Atom prop_type;
    int prop_format,count=0;
    unsigned long prop_size, prop_items;

    wc = WC(D);
    unsigned long len;
    unsigned char *txt;
    target = XA_STRING;
    sel = evt.xselectionrequest.selection;
    if (evt.type != SelectionRequest) return (0);
    win = evt.xselectionrequest.requestor;
    pty = evt.xselectionrequest.property;
    prop=None;
    if(sel==XA_PRIMARY) {
//      printf("pty is Primary\n");
      prop = XInternAtom(wc->Dsp, "XPRI_IN", True);
    }
    else {
//     printf("pty is Clipboard\n");
     prop = XInternAtom(wc->Dsp, "XCLIP_IN", True);
    }
    XGetWindowProperty(wc->Dsp, wc->Win, prop, 0, 0, False,
                           AnyPropertyType, &prop_type,
                          &prop_format,
                           &prop_items, &prop_size, &txt);
   XFree(txt);
   txt=NULL;
   len = prop_size;
//   printf("len = %d\n",len);
   XGetWindowProperty(wc->Dsp, wc->Win, prop, 0, len, False,
                           AnyPropertyType, &prop_type,
                          &prop_format,
                           &prop_items, &prop_size, &txt);

